---
- name: Derive total volume need from fS requirement of the composant
  set_fact:
    total_volume_gb: "{{ yak_inventory_os_storages|json_query('[*].size_gb|[]')|sum }}"

- debug: var=role_storage_devices

#Â derive_volumes_need_max_size_gb need to be provided for example with vars:
- name: Derive number of disk needed
  set_fact:
    number_of_devices: "{{ (total_volume_gb|int / derive_volumes_need_max_size_gb|int) | round(0,'ceil') | int  }}"
    allowed_device_alphabet_letter: "fghijklmnopqrstuvwxyz"
